Next.js(기본 SSR방식-> 사전렌더링)
1. Page Router
- 간편한 Page Routing(폴더 혹은 파일명만으로 페이지 분기)
- Pre0Rendering(사전 렌더링) // SSR => Client Data 전달하는 속도 효율 // FCP => TTI (Hydration)

App Router가 나온 배경
1)  페이지별 특정 컴포넌트 페이지의 출력여부를 일일히 설정 & 해당 컴포넌트 페이지 내부에 매개변수 및 타입 정의 등 정리해야할 요소들이 생각보다 적지 않았다
> 특정 페이지에  영향을 미치게 하는 공통 layout 이라는 개념

2) 데이터 패칭이 특정 페이지 컴포넌트에 집중(과부하)

3) 불필요한 JS Bundle 데이터를 제외하고 client에게 전달하고자하는 목적
> Next.js는 SSR 방식으로 사전 렌더링을 하고 있기 때문에 무조건 build 단계에서 정의된 JS 데이터를 반드시 client에게 전달!

Next.js > App Router 버전 => 페이지 컴포넌트를 2가지의 형태로 구분
Server Component Page  : 서버측에서 사전 렌더링을 진행할 때, 딱 한 번만 실행(client)
Client Component Page : 서버측에서 사전 렌더링을 진행할 때, 한 번 실행하고 클라이언트에게 해당 컴포넌트 페이지가 전달된 이후 FCP => TTI(하이드레이션 단계 한 번 더 실행)




2. App Router
- Page Routing
> Common Layout

- Data Fetching
> SSR
> SSG
> ISR


next.js 설치
npx create-next-app@latest .
ok to proceed? y
would you like to use TypeScript? yes
would you like to use ESLint? yes
would you like to use TailWind Css? No
would you like your code inside a `src/` directory? yes
 Would you like to use App Router? (recommended) ... Yes
Would you like to use Turbopack for next dev? ... No
 Would you like to customize the import alias (@/* by default)? ... No 

npm run dev


globals.css 내용 전체 지우기
page.modult.css 내용 전체 지우기
page.tsx -> main과 footer 삭제
import styles from "./page.module.css";

export default function Home() {
  return (
    <div className={styles.page}>인덱스 페이지</div>
  );
}

기본적으로 App router를 활용해서 페이지 컴포넌트를 만들면 기본적으로 server 컴포넌트의 속성을 가집니다


=> client 컴포넌트

동적 파라미터의 값이 2개 이상 : Catch All Segment[...아이디]
동적 파라미터의 값이 없을 때에도 대응 : Optional Catch All Segment [[...아이디]]


> Catch All Segment 혹은 Optional Catch All Segment를 사용하면 동적 파라미터의 값을 부담없이 사용할 수 있는 장점!

> 동적 파라미터의 값이 존재 x => 404 에러메시지


Route Group : 경로상에서는 아무런 영향을 미치지 않습니다. 하지만 공통의 Layout을 적용시키고자 하는 컴포넌트 페이지들을 그룹핑!!!


------------------------------------------

Page Router 방식
-폴더명 > 페이지 라우팅

- 각각의 페이지 마다 설정하고 싶은 레이아웃을 별도로 만들어서 적용

App Router 방식

- Page Routing 설정방식
> Route Group을 설정

- Layout 설정방식
> 페이지의 부모요소로서 작동// 특정 Layout을 가지고 있는 폴더는 하위 폴더 내 모든 페이지들에게 Layout 속성을 적용

- Data Fetching 설정방식
> SSR : 사전 렌더링을 통해서 클라이언트 측ㄱ에서 어떤 요청사항이 발생했을 때, 전통적인 SSR방식보다 훨씬 빠르게 응답할 수 있도록해주는 방식

> SSG : 만약 사전 렌더링의 과정에서 많은 데이터양을 취급해야하는 상황이 발생한다면 사전 렌더링 자체에 시간 소요가 많아지기 때문에 결국 클라이언트에게 빠른 응답을 할 수 없기에 Next.js의 서버에서 Build단계를 거칠 때, 이미 클라이언트측에 전달한 데이터를 정의하는 방식

> ISR : SSG방식으로 데이터를 정의 + 개발자가 정의해놓은 시간, 주기에 맞춰서 서버측 데이터를 새롭게 업데이트하는 방식

- 서버 컴포넌트 페이지 : 무조건 서버측에서만 실행되는 페이지
- 클라이언트 컴포넌트 페이지 : 서버에서 사전 렌더링을 하는 단계에서 1회 실행 + 클라이언트 단계에서 Hydration(FCT에서 TTI로 넘어가는 순간)을 하는 순간 1회 실행

> Next.js의 경우, 가급적이면 서버 컴포넌트 페이지의 속성을 사용하라고 권장, 부득이한 경우에만 클라이언트 클라이언트 컴포넌트 페이지를 사용해줄 것

* 단, 서버컴포넌트 페이지를 사용할 때, 주의사항
1) 서버 컴포넌트 안에는 브라우저에서 실행될 코드 x
2) 클라이언트 컴포넌트라고 해서 반드시 꼭 클라이언트 단계에서만 실행되는 것은 아니다
3) 클라이언트 컴포넌트는 서버 컴포넌트를 import  불가
4) 서버 컴포넌트에서 클라이언트 컴포넌트에게 props를 전달할 때 직렬화되지 않은 데이터(=함수)는 전달할 수 없음
* 직렬화 되어있는 데이터 자료 => 객체와 같이 어떤 구조를 띄고있는 데이터(함수는 제외)

서버 : 사전렌더링 (*JS 번들데이터를 취합) 컴포넌트 페이지>
서버 컴포넌트 페이지
클라이언트 컴포넌트 페이지

RSC : React Server Component + Payload

네비게이션